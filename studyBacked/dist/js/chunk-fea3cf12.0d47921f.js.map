{"version":3,"sources":["webpack:///./src/views/pages/backendManage/roleManage/roleManage.vue?9dfd","webpack:///./src/views/pages/backendManage/roleManage/roleManage.vue.js?3847","webpack:///./src/views/pages/backendManage/roleManage/roleManage.vue","webpack:///./src/views/pages/backendManage/roleManage/roleManage.vue.js","webpack:///./src/views/pages/backendManage/roleManage/roleManage.vue.css?9bbf"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","staticStyle","attrs","on","$event","showSetRightDialog","table","scopedSlots","_u","key","fn","scope","_s","row","id","name","handleDelete","pages","page","size","totalSize","handleSizeChange","handleCurrentChange","roleId","dialogFormVisible","showSetRightDialogClosed","input","model","value","callback","$$v","$set","expression","ref","rightsList","treeProps","defKeys","slot","handleEdit","staticRenderFns","component","module","exports","data","cont","roleTable","roleData","label","children","created","getList","load","openFullScreen","methods","res","$http","getRoleList","code","list","getNavList","keys","e","getRoleEdit","i","permissionList","k","push","setTimeout","$refs","treeRef","getCheckedKeys","getHalfCheckedKeys","rights","join","console","log","$confirm","confirmButtonText","cancelButtonText","type","center","then","putRoleEdit","postRoleEdit","$message","message","catch","deleteRole","setCheckedKeys","val"],"mappings":"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","file":"js/chunk-fea3cf12.0d47921f.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"meuBottom\"},[_c('span',{staticClass:\"listTitle\"},[_vm._v(\" 用户列表 \"),_c('el-button',{staticStyle:{\"float\":\"right\",\"margin-top\":\"10px\"},attrs:{\"size\":\"mini\"},on:{\"click\":function($event){return _vm.showSetRightDialog()}}},[_vm._v(\"+新增\")])],1),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.table,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"label\":\"ID\",\"width\":\"120\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.id))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"角色名\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(scope.row.name))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"200\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"text\",\"icon\":\"el-icon-edit\"},on:{\"click\":function($event){return _vm.showSetRightDialog(scope.row.id)}}},[_vm._v(\"编辑\")]),_c('el-button',{staticStyle:{\"color\":\"red\"},attrs:{\"size\":\"mini\",\"type\":\"text\",\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){return _vm.handleDelete(scope.row.id)}}},[_vm._v(\"删除\")])]}}])})],1),_c('div',{staticStyle:{\"margin\":\"10px\",\"text-align\":\"center\"}},[_c('el-pagination',{attrs:{\"background\":true,\"current-page\":_vm.pages.page,\"page-sizes\":[1,2,3,4,5,6,7,8,9,10, 20, 30, 40],\"page-size\":_vm.pages.size,\"layout\":\" sizes, prev, pager, next, jumper\",\"total\":_vm.pages.totalSize},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)],1),_c('el-dialog',{attrs:{\"title\":_vm.roleId?'编辑角色':'新增角色',\"visible\":_vm.dialogFormVisible,\"center\":\"\"},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event},\"close\":_vm.showSetRightDialogClosed}},[_c('div',{staticClass:\"roleName\"},[_c('el-form',{attrs:{\"model\":_vm.input}},[_c('el-form-item',{attrs:{\"label\":\"角色名:\",\"required\":\"\"}},[_c('el-input',{staticStyle:{\"width\":\"40%\"},attrs:{\"clearable\":\"\"},model:{value:(_vm.input.name),callback:function ($$v) {_vm.$set(_vm.input, \"name\", $$v)},expression:\"input.name\"}})],1)],1)],1),_c('el-tree',{ref:\"treeRef\",attrs:{\"data\":_vm.rightsList,\"props\":_vm.treeProps,\"node-key\":\"id\",\"show-checkbox\":\"\",\"default-expand-all\":\"\",\"default-checked-keys\":_vm.defKeys}}),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogFormVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{on:{\"click\":function($event){return _vm.showSetRightDialogClosed()}}},[_vm._v(\"重 置\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"disabled\":_vm.input.name==''},on:{\"click\":function($event){return _vm.handleEdit()}}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!./roleManage.vue.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!./roleManage.vue.js?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./roleManage.vue?vue&type=template&id=62b427dd&\"\nimport script from \"./roleManage.vue.js?vue&type=script&lang=js&\"\nexport * from \"./roleManage.vue.js?vue&type=script&lang=js&\"\nimport style0 from \"./roleManage.vue.css?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = {\r\n    data(){\r\n        return {\r\n            pages:this.cont.pages,\r\n            table:this.cont.roleTable,\r\n            input:this.cont.roleData,\r\n            dialogFormVisible: false,         \r\n            rightsList: [] ,// 角色所有权限数据\r\n            defKeys: [] ,// 默认选中的节点ID值数组\r\n            roleId: '', // 当前角色id\r\n            treeProps: {\r\n                label: 'name',\r\n                children: 'children'\r\n            }\r\n        }\r\n    },\r\n    created() {\r\n        this.getList()\r\n        this.load. openFullScreen()\r\n    },\r\n    methods: {\r\n        /* -----------------------后台请求------------------------ */\r\n        //角色管理\r\n        async getList(){\r\n            let page = `page=${this.pages.page}&size=${this.pages.size}`\r\n            const {data:res} = await this.$http.getRoleList(page)\r\n            // console.log(res)\r\n            if(res.code==0){\r\n                this.table = res.data.list\r\n                this.pages.totalSize = res.data.totalSize\r\n            }    \r\n        },\r\n        //获取详情\r\n        async showSetRightDialog(id) {\r\n            this.roleId = id // 获取角色id\r\n            const {data:res} = await this.$http.getNavList()\r\n            this.rightsList = res.data\r\n            if(this.roleId){ \r\n                let keys = []  \r\n                const {data:e} = await this.$http.getRoleEdit(this.roleId)\r\n                for(const i in e.data.permissionList){\r\n                    for (const key in res.data) {\r\n                        for (const k in res.data[key].children) {\r\n                            if(e.data.permissionList[i]==res.data[key].children[k].id){\r\n                                keys.push(res.data[key].children[k].id)\r\n                            }\r\n                        }     \r\n                    }   \r\n                }\r\n                this.input.name = e.data.name\r\n                this.defKeys = keys\r\n            }  \r\n            setTimeout(() => {\r\n                this.dialogFormVisible = true\r\n            }, 500);         \r\n        },\r\n        //详情新增编辑\r\n        handleEdit() {\r\n            const keys = [\r\n                ...this.$refs.treeRef.getCheckedKeys(),\r\n                ...this.$refs.treeRef.getHalfCheckedKeys()\r\n            ]\r\n            const rights = keys.join(',')\r\n            console.log(rights)\r\n            let key = `id=${this.roleId}&name=${this.input.name}&permissionList=${rights}`\r\n            this.$confirm('确定要保存吗?', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning',\r\n                center: true\r\n            }).then(()=>{\r\n                if(this.roleId){\r\n                    this.$http.putRoleEdit(key)\r\n                }else {\r\n                    this.$http.postRoleEdit(key)\r\n                }\r\n                this.getList()\r\n                this.$message({type:'success',message:'保存成功',center: true})\r\n                this.dialogFormVisible = false\r\n            }).catch(() => {\r\n                this.$message({\r\n                  type: 'info',\r\n                  message: '已取消保存'\r\n                })         \r\n            })   \r\n        },\r\n        //角色删除\r\n        async handleDelete(id) {\r\n            this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning',\r\n                center: true\r\n            }).then(() => {\r\n                this.$http.deleteRole(id).then(res=>{\r\n                    // console.log(res)\r\n                    if(res.data.code==0){\r\n                        this.getList()\r\n                        this.$message({type:'success',message:'删除成功',center: true})\r\n                    } \r\n                }) \r\n            }).catch(() => {\r\n                this.$message({\r\n                  type: 'info',\r\n                  message: '已取消删除'\r\n                });          \r\n            }); \r\n        }, \r\n        // 监听 分配权限对话框的关闭事件\r\n        showSetRightDialogClosed() {\r\n            this.defKeys = []\r\n            this.$refs.treeRef.setCheckedKeys([]); \r\n            this.input.name = ''\r\n        },\r\n        /*--------------- 分页功能------------------- */\r\n        handleSizeChange(val) { \r\n            this.pages.size = val; \r\n            this.getList()        \r\n            // console.log(`每页 ${val} 条`);\r\n        },\r\n        handleCurrentChange(val) {\r\n            this.pages.page = val;\r\n            this.getList()\r\n            // console.log(`当前页: ${val}`);\r\n        },\r\n     \r\n    },\r\n}\r\n\r\n","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!./roleManage.vue.css?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!./roleManage.vue.css?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}