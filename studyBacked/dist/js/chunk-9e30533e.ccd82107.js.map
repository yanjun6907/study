{"version":3,"sources":["webpack:///./src/views/pages/contentManage/article/articleEdit/articleEdit.vue","webpack:///./src/views/pages/contentManage/article/articleEdit/articleEdit.vue.css?b5f3","webpack:///./src/views/pages/contentManage/article/articleEdit/articleEdit.vue.js?2bbd","webpack:///./src/views/pages/contentManage/article/articleEdit/articleEdit.vue.js","webpack:///./src/views/pages/contentManage/article/articleEdit/articleEdit.vue?c421"],"names":["component","module","exports","data","ruleForm","this","cont","editorOption","editor","rules","dialogVisible","hideUploadArticle","dialogImageUrl","fileLists","articleId","created","type","load","openFullScreen","$route","query","id","getEdit","methods","res","$http","getArticleEdit","url","letterImage","formName","patchArticleEdit","code","setTimeout","$router","push","postArticleEdit","$refs","validate","valid","$message","success","message","center","warning","resetForm","resetFields","goBack","file","uploadFile","error","beforeExcelUpload","size","handlePictureCardPreview","handleRemove","fileList","uploadEorror","hideUploadVideo","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","ref","attrs","staticStyle","model","value","callback","$$v","$set","expression","class","hide","on","$event","title","author","content","submitForm","staticRenderFns"],"mappings":"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","file":"js/chunk-9e30533e.ccd82107.js","sourcesContent":["import { render, staticRenderFns } from \"./articleEdit.vue?vue&type=template&id=4959c031&\"\nimport script from \"./articleEdit.vue.js?vue&type=script&lang=js&\"\nexport * from \"./articleEdit.vue.js?vue&type=script&lang=js&\"\nimport style0 from \"./articleEdit.vue.css?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!./articleEdit.vue.css?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!./articleEdit.vue.css?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!./articleEdit.vue.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!./articleEdit.vue.js?vue&type=script&lang=js&\"","module.exports = {\r\ndata() {\r\n    return {\r\n      ruleForm:this.cont.ruleForm,\r\n      editorOption:this.cont.editor,\r\n      rules:this.cont.rules,  \r\n      dialogVisible: false,\r\n      hideUploadArticle: false,\r\n      dialogImageUrl: '',\r\n      fileLists: [],\r\n      articleId:''\r\n    }\r\n  },\r\n  created() {\r\n    this.ruleForm.type = 0\r\n    this.load. openFullScreen()\r\n    this.articleId = this.$route.query.id\r\n    if(this.articleId){\r\n      this.getEdit(this.articleId)\r\n    } \r\n    return false  \r\n  },\r\n  methods: {\r\n    /* ------------------后台请求-------------------- */\r\n    //获取文章\r\n    async getEdit(id){\r\n      const {data:res} = await this.$http.getArticleEdit(id)\r\n      this.ruleForm = res.data\r\n      this.fileLists = [{url:res.data.letterImage}]\r\n      this.hideUploadArticle = true \r\n    },\r\n    //文章详情保存\r\n    async submitForm(formName) {\r\n      if(this.articleId){\r\n        const {data:res} = await this.$http.patchArticleEdit(this.articleId,this.ruleForm)\r\n        if(res.code==3202){\r\n          setTimeout(() => {\r\n            this.$router.push('/article')\r\n          }, 1500)\r\n        }\r\n      }else{\r\n        const {data:res} = await this.$http.postArticleEdit(this.ruleForm)\r\n        // console.log(res)\r\n        if(res.code==3202){\r\n          setTimeout(() => {\r\n            this.$router.push('/article')\r\n          }, 1500)\r\n        }\r\n      }\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          this.$message.success({message:`保存成功！`,center: true})\r\n          return true\r\n        } else {\r\n          this.$message.warning({message:`内容填写不完整！`,center: true})\r\n          return false\r\n        }\r\n      });\r\n    },\r\n    //清空\r\n    resetForm(formName){\r\n      this.$refs[formName].resetFields()\r\n      this.fileLists = []\r\n      setTimeout(() => {\r\n        this.hideUploadArticle = false\r\n      }, 100);  \r\n    },\r\n    //取消\r\n    goBack(formName) {\r\n      this.resetForm(formName)\r\n      this.$router.push('/article')\r\n    },\r\n   /*-------------上传---------------*/\r\n    async uploadFile(file){\r\n      this.hideUploadArticle = true\r\n      const {data:res} = await this.$http.uploadFile(file.file)\r\n      if (res.code == 0) {\r\n        setTimeout(()=>{\r\n          this.ruleForm.letterImage = res.data.url\r\n          this.$message.success({message:`上传成功！`,center: true})\r\n        },100) \r\n      }else {\r\n        this.$message.error({message:`上传失败！`,center: true})\r\n      }\r\n    },\r\n    beforeExcelUpload(file) {\r\n      if (file.size > 1024 * 1024 * 0.4) {\r\n        this.$message.error({ message: \"图片大小不超过400KB!\", center:'true'})\r\n        return false\r\n      }\r\n    },\r\n    handlePictureCardPreview(file) {\r\n      this.dialogImageUrl = file.url\r\n      this.dialogVisible = true\r\n    },\r\n    handleRemove(file, fileList) {\r\n      setTimeout(()=>{\r\n        this.hideUploadArticle = false\r\n      },100)  \r\n      this.fileLists = fileList\r\n      this.ruleForm.letterImage=''\r\n    },\r\n    uploadEorror(){\r\n      this.$message.error(\"视频上传失败,请联系客服！\");\r\n      this.hideUploadVideo = false\r\n   },\r\n  }\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"MainIncrease\"},[_c('div',{staticClass:\"IncreaseTitle\"},[_vm._v(\" \"+_vm._s(_vm.articleId?'视频新增':'文章新增')+\" \")]),_c('el-form',{ref:\"ruleForm\",staticClass:\" editForm\",attrs:{\"model\":_vm.ruleForm,\"rules\":_vm.rules,\"label-width\":\"60px\"}},[_c('el-form-item',{attrs:{\"label\":\"标题:\",\"prop\":\"title\"}},[_c('el-input',{staticStyle:{\"width\":\"50%\"},model:{value:(_vm.ruleForm.title),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"title\", $$v)},expression:\"ruleForm.title\"}})],1),_c('el-form-item',{attrs:{\"label\":\"作者:\",\"prop\":\"author\"}},[_c('el-input',{staticStyle:{\"width\":\"50%\"},model:{value:(_vm.ruleForm.author),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"author\", $$v)},expression:\"ruleForm.author\"}})],1),_c('el-form-item',{attrs:{\"label\":\"分类:\",\"prop\":\"type\"}},[_c('el-select',{staticStyle:{\"width\":\"50%\"},attrs:{\"placeholder\":\"请选择活动区域\"},model:{value:(_vm.ruleForm.type),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"type\", $$v)},expression:\"ruleForm.type\"}},[_c('el-option',{attrs:{\"label\":\"card文章\",\"value\":0}}),_c('el-option',{attrs:{\"label\":\"banner文章\",\"value\":1}})],1)],1),_c('el-form-item',{attrs:{\"label\":\"封面:\",\"required\":\"\",\"prop\":\"letterImage\"}},[_c('el-upload',{staticClass:\"upload-demo\",class:{hide:_vm.hideUploadArticle},attrs:{\"before-upload\":_vm.beforeExcelUpload,\"accept\":\"image/*\",\"on-error\":_vm.uploadEorror,\"http-request\":_vm.uploadFile,\"file-list\":_vm.fileLists,\"action\":\"#\",\"on-remove\":_vm.handleRemove,\"on-preview\":_vm.handlePictureCardPreview,\"list-type\":\"picture-card\",\"limit\":1},model:{value:(_vm.ruleForm.letterImage),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"letterImage\", $$v)},expression:\"ruleForm.letterImage\"}},[_c('i',{staticClass:\"el-icon-upload\"})]),_c('el-dialog',{attrs:{\"visible\":_vm.dialogVisible},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('img',{attrs:{\"width\":\"100%\",\"src\":_vm.dialogImageUrl,\"alt\":\"\"}})])],1),_c('el-form-item',{attrs:{\"label\":\"内容:\",\"prop\":\"content\"}},[_c('quill-editor',{ref:\"myTextEditor\",staticClass:\"editor\",attrs:{\"options\":_vm.editorOption},model:{value:(_vm.ruleForm.content),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"content\", $$v)},expression:\"ruleForm.content\"}})],1)],1),_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('el-button',{attrs:{\"type\":\"success\",\"disabled\":_vm.ruleForm.title==''||_vm.ruleForm.letterImage==''||_vm.ruleForm.author==''||_vm.ruleForm.content==''},on:{\"click\":function($event){return _vm.submitForm('ruleForm')}}},[_vm._v(\"保存\")]),_c('el-button',{staticStyle:{\"marign\":\"0 10px\"},on:{\"click\":function($event){return _vm.resetForm('ruleForm')}}},[_vm._v(\"重置\")]),_c('el-button',{on:{\"click\":function($event){return _vm.goBack('ruleForm')}}},[_vm._v(\"取消\")])],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"],"sourceRoot":""}