{"version":3,"sources":["webpack:///./src/views/pages/contentManage/video/videoEdit/videoEdit.vue","webpack:///./src/views/pages/contentManage/video/videoEdit/videoEdit.vue.js?a305","webpack:///./src/views/pages/contentManage/video/videoEdit/videoEdit.vue.js","webpack:///./src/views/pages/contentManage/video/videoEdit/videoEdit.vue?e566","webpack:///./src/views/pages/contentManage/video/videoEdit/videoEdit.vue.css?4858"],"names":["component","module","exports","data","token","sessionStorage","getItem","dialogFormVisible1","videoFlag","dialogVisible","hideUploadVideo","ruleForm","this","cont","ruleForm4","rules","rules4","editorOption","editor","userId","$route","query","id","videoUploadPercent","dialogImageUrl","fileLists","created","load","openFullScreen","getEdit","methods","res","$http","getVideoEdit","url","videoImage","formName","patchVideoEdit","code","$router","push","postVideoEdit","$refs","validate","valid","$message","success","message","center","warning","goBack","resetFields","resetForm","setTimeout","file","uploadFile","teacherImage","error","beforeExcelUpload","size","handleRemove","fileList","handlePictureCardPreview","F_uploadFile","videoUrl","beforeUploadVideo","fileSize","videoSrc","window","URL","createObjectURL","video","document","createElement","src","that","indexOf","type","oncanplay","console","log","videoWidth","duration","uploadchange","status","timer","setInterval","clearInterval","timer2","timer3","uploadEorror","remove","uploader","abort","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","ref","attrs","staticStyle","model","value","callback","$$v","$set","expression","_l","item","key","label","on","_e","T_uploadFile","class","hide","V_uploadFile","$event","grade","subject","title","intro","teacherName","content","submitForm","staticRenderFns"],"mappings":"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","file":"js/chunk-5b42bc4b.7519f833.js","sourcesContent":["import { render, staticRenderFns } from \"./videoEdit.vue?vue&type=template&id=6e5c12da&\"\nimport script from \"./videoEdit.vue.js?vue&type=script&lang=js&\"\nexport * from \"./videoEdit.vue.js?vue&type=script&lang=js&\"\nimport style0 from \"./videoEdit.vue.css?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!./videoEdit.vue.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!./videoEdit.vue.js?vue&type=script&lang=js&\"","\r\nmodule.exports = {\r\n    data() {\r\n        return {\r\n          token:sessionStorage.getItem('auth_token'),\r\n          dialogFormVisible1: false,\r\n          videoFlag: false,\r\n          dialogVisible: false,\r\n          hideUploadVideo: false,\r\n          ruleForm:this.cont.ruleForm4,\r\n          rules:this.cont.rules4,\r\n          editorOption:this.cont.editor,\r\n          userId:this.$route.query.id,\r\n          videoUploadPercent: 0,\r\n          dialogImageUrl: '',\r\n          fileLists: [],\r\n        }\r\n      },\r\n      created() {\r\n        this.load. openFullScreen()\r\n        if(this.userId){\r\n          this.getEdit(this.userId)\r\n        } \r\n        return false \r\n      },\r\n      methods: {\r\n        /* ------------------后台请求-------------------- */\r\n        //获取文章\r\n        async getEdit(id){\r\n          const {data:res} = await this.$http.getVideoEdit(id)\r\n          // console.log(res)\r\n          this.ruleForm = res.data\r\n          this.fileLists = [{url:res.data.videoImage}]\r\n          this.hideUploadVideo = true \r\n        },\r\n        //文章详情保存\r\n        async submitForm(formName) {\r\n          if(this.userId){\r\n            const {data:res} = await this.$http.patchVideoEdit(this.userId,this.ruleForm)\r\n            // console.log(res)\r\n            if(res.code==0){\r\n              this.$router.push('/video')\r\n            }\r\n          }else{\r\n            const {data:res} = await this.$http.postVideoEdit(this.ruleForm)\r\n            if(res.code==0){\r\n              this.$router.push('/video')\r\n            }\r\n          }\r\n          this.$refs[formName].validate((valid) => {\r\n            if (valid) {\r\n              this.$message.success({message:`保存成功！`,center: true})\r\n              return true\r\n            } else {\r\n              this.$message.warning({message:`内容填写不完整！`,center: true})\r\n              return false\r\n            }\r\n          });\r\n        },\r\n        //取消\r\n        goBack(formName){\r\n          this.$refs[formName].resetFields();\r\n          this.$router.push('/video')\r\n        },\r\n        //重置\r\n        resetForm(formName) {\r\n          this.$refs[formName].resetFields();\r\n          this.fileLists = []\r\n          setTimeout(() => {\r\n            this.hideUploadVideo = false\r\n          }, 100);  \r\n        },\r\n        /* --------------------头像or封面上传--------------------- */\r\n        async T_uploadFile(file){\r\n          const {data:res} = await this.$http.uploadFile(file.file)\r\n          if (res.code == 0) {\r\n            this.$message.success({message:`上传成功！`,center: true})\r\n            setTimeout(()=>{\r\n              this.ruleForm.teacherImage = res.data.url\r\n            },500) \r\n          }else {\r\n            this.$message.error({message:`上传失败！`,center: true})\r\n          }\r\n        },\r\n        async V_uploadFile(file){\r\n          this. hideUploadVideo = true\r\n          const {data:res} = await this.$http.uploadFile(file.file)\r\n          if (res.code == 0) {\r\n            this.$message.success({message:`上传成功！`,center: true})\r\n            setTimeout(()=>{\r\n              this.ruleForm.videoImage = res.data.url\r\n            },500) \r\n          }else {\r\n            this.$message.error({message:`上传失败！`,center: true})\r\n          }\r\n        },\r\n        beforeExcelUpload(file) {\r\n          if (file.size > 1024 * 1024 * 0.4) {\r\n            this.$message.error({ message: \"图片大小不超过400KB!\", center:'true'})\r\n            return false\r\n          }\r\n        },\r\n        handleRemove(file, fileList) {\r\n          setTimeout(()=>{\r\n            this.hideUploadVideo = false;\r\n          },100)  \r\n          this.fileLists = fileList;\r\n          this.ruleForm.videoImage='';\r\n        },\r\n        handlePictureCardPreview(file) {\r\n          this.dialogImageUrl = file.url;\r\n          this.dialogVisible = true;\r\n        },\r\n        /* ---------------------视频上传 ---------------------- */\r\n        F_uploadFile(res,file){\r\n          if(res.code == 0){\r\n            this.ruleForm.videoUrl = res.data.url\r\n          }       \r\n        },\r\n        beforeUploadVideo(file) {\r\n          this.ruleForm.videoUrl = '' \r\n          var fileSize = file.size / 1024 / 1024 < 200;\r\n          const videoSrc = window.URL.createObjectURL(file)\r\n          const video = document.createElement('video')\r\n          video.src = videoSrc\r\n          let that = this\r\n          if (['video/mp4'].indexOf(file.type) == -1) {\r\n              this.$message.error(\"请上传正确的视频格式\");\r\n              this.videoFlag = false\r\n              return false;\r\n            \r\n          }else {\r\n            video.oncanplay = function() {\r\n              console.log(file)\r\n              if(this.videoWidth > 1080){\r\n                that.$message.error(\"分辨率不得超过1080p\");\r\n                that.videoFlag = false\r\n                return false;\r\n              }\r\n              else if(file.size*8/1024/this.duration > 6000){\r\n                that.$message.error(\"视频码率不得超过6000kbps\");\r\n                that.videoFlag = false\r\n                return false;\r\n              }\r\n              else if (!fileSize) {\r\n                that.$message.error(\"视频大小不能超过200MB\");\r\n                that.videoFlag = false\r\n                return false;\r\n              }else {\r\n                that.videoFlag = true\r\n              }\r\n            }\r\n          }\r\n        },\r\n        uploadchange (file,fileList) {\r\n          if (file.status === 'ready') {\r\n            this.videoUploadPercent = 0\r\n            const timer = setInterval(() => {\r\n              if (this.videoUploadPercent >= 35) {\r\n                clearInterval(timer)\r\n                return\r\n              }\r\n              this.videoUploadPercent += 1\r\n            }, 400)\r\n            const timer2 = setInterval(() => {\r\n              if (this.videoUploadPercent >= 75) {\r\n                clearInterval(timer2)\r\n                return\r\n              }\r\n              this.videoUploadPercent += 1\r\n            }, 800)\r\n            const timer3 = setInterval(() => {\r\n              if (this.videoUploadPercent >= 99) {\r\n                clearInterval(timer3)\r\n                return\r\n              }\r\n              this.videoUploadPercent += 1\r\n            }, 1200)\r\n          }\r\n          if (file.status === 'success') {\r\n            this.videoUploadPercent = 100\r\n            setTimeout(() => {\r\n              this.videoFlag = false\r\n            }, 1500);\r\n          }\r\n        },\r\n        uploadEorror(){\r\n           this.$message.error(\"视频上传失败,请联系客服！\");\r\n           this.hideUploadVideo = false\r\n           this.remove()\r\n        },\r\n        remove(){\r\n          this.$refs.uploader.abort()\r\n          this.videoFlag = false\r\n          this.ruleForm.videoUrl = ''\r\n        }\r\n      }\r\n    }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"mainIncrease\"},[_c('div',{staticClass:\"increaseTitle\"},[_vm._v(_vm._s(_vm.userId?'视频编辑':'视频新增'))]),_c('el-form',{ref:\"ruleForm\",staticClass:\" editForm\",attrs:{\"model\":_vm.ruleForm,\"rules\":_vm.rules,\"label-width\":\"85px\"}},[_c('div',{staticStyle:{\"display\":\"flex\"}},[_c('div',{staticClass:\"fristRow\"},[_c('el-form-item',{staticClass:\"fristRowLabel\",attrs:{\"label\":\"老师昵称:\",\"prop\":\"teacherName\"}},[_c('el-input',{staticStyle:{\"width\":\"100%\"},model:{value:(_vm.ruleForm.teacherName),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"teacherName\", $$v)},expression:\"ruleForm.teacherName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"标　　题:\",\"prop\":\"title\"}},[_c('el-input',{staticStyle:{\"width\":\"100%\"},model:{value:(_vm.ruleForm.title),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"title\", $$v)},expression:\"ruleForm.title\"}})],1),_c('el-form-item',{staticClass:\"fristRowLabel\",attrs:{\"label\":\"所属年级:\",\"prop\":\"grade\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.ruleForm.grade),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"grade\", $$v)},expression:\"ruleForm.grade\"}},_vm._l((_vm.cont.grade),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_c('el-form-item',{staticClass:\"fristRowLabel\",attrs:{\"label\":\"所属科目:\",\"prop\":\"subject\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.ruleForm.subject),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"subject\", $$v)},expression:\"ruleForm.subject\"}},_vm._l((_vm.cont.subject),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"分　　类:\",\"prop\":\"type\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.ruleForm.type),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"type\", $$v)},expression:\"ruleForm.type\"}},[_c('el-option',{attrs:{\"label\":\"card视频\",\"value\":0}}),_c('el-option',{attrs:{\"label\":\"banner图\",\"value\":1}})],1)],1),_c('el-form-item',{attrs:{\"label\":\"视频简介:\",\"prop\":\"intro\"}},[_c('el-input',{staticStyle:{\"width\":\"100%\"},attrs:{\"type\":\"textarea\",\"rows\":6,\"placeholder\":\"请输入内容\",\"maxlength\":\"140\",\"show-word-limit\":\"\"},model:{value:(_vm.ruleForm.intro),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"intro\", $$v)},expression:\"ruleForm.intro\"}})],1),_c('el-form-item',{attrs:{\"label\":\"视频上传:\",\"prop\":\"videoUrl\"}},[_c('div',{staticStyle:{\"display\":\"flex\",\"margin-bottom\":\"10px\"}},[_c('el-upload',{ref:\"uploader\",staticClass:\"video-uploader\",attrs:{\"action\":\"/api/a/m/common/upload\",\"headers\":{'userToken':_vm.token},\"on-error\":_vm.uploadEorror,\"on-change\":_vm.uploadchange,\"on-success\":_vm.F_uploadFile,\"before-upload\":_vm.beforeUploadVideo,\"show-file-list\":false},model:{value:(_vm.ruleForm.videoUrl),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"videoUrl\", $$v)},expression:\"ruleForm.videoUrl\"}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"点击上传\")])],1),_c('el-button',{staticStyle:{\"margin-left\":\"25px\"},attrs:{\"size\":\"small\",\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"circle\":\"\"},on:{\"click\":_vm.remove}})],1),(_vm.videoFlag)?_c('el-progress',{staticStyle:{\"margin\":\"10px auto\"},attrs:{\"percentage\":_vm.videoUploadPercent}}):_vm._e(),(_vm.ruleForm.videoUrl)?_c('video',{staticClass:\"avatar video-avatar\",attrs:{\"src\":_vm.ruleForm.videoUrl,\"controls\":\"controls\",\"id\":\"video\"}},[_vm._v(\" 您的浏览器不支持视频播放 \")]):_vm._e()],1)],1),_c('div',{staticStyle:{\"display\":\"flex\",\"flex-direction\":\"column\",\"flex\":\"4\"}},[_c('el-form-item',{staticStyle:{\"padding\":\"0 60px\"},attrs:{\"label\":\"头　　像:\",\"prop\":\"teacherImage\"}},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":\"#\",\"show-file-list\":false,\"on-error\":_vm.uploadEorror,\"before-upload\":_vm.beforeExcelUpload,\"http-request\":_vm.T_uploadFile},model:{value:(_vm.ruleForm.teacherImage),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"teacherImage\", $$v)},expression:\"ruleForm.teacherImage\"}},[(_vm.ruleForm.teacherImage)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.ruleForm.teacherImage}}):_vm._e(),_c('i',{staticClass:\"el-icon-upload\"})])],1),_c('el-form-item',{staticStyle:{\"margin\":\"66px 60px\"},attrs:{\"label\":\"封　　面:\",\"prop\":\"videoImage\"}},[_c('el-upload',{staticClass:\"upload-demo\",class:{hide:_vm.hideUploadVideo},attrs:{\"accept\":\"image/*\",\"on-error\":_vm.uploadEorror,\"before-upload\":_vm.beforeExcelUpload,\"http-request\":_vm.V_uploadFile,\"file-list\":_vm.fileLists,\"action\":\"#\",\"on-remove\":_vm.handleRemove,\"on-preview\":_vm.handlePictureCardPreview,\"list-type\":\"picture-card\",\"limit\":1},model:{value:(_vm.ruleForm.videoImage),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"videoImage\", $$v)},expression:\"ruleForm.videoImage\"}},[_c('i',{staticClass:\"el-icon-upload\"})]),_c('el-dialog',{attrs:{\"visible\":_vm.dialogVisible},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('img',{attrs:{\"width\":\"100%\",\"src\":_vm.dialogImageUrl}})])],1)],1)]),_c('el-form-item',{attrs:{\"label\":\"正　　文:\",\"prop\":\"content\"}},[_c('quill-editor',{ref:\"myTextEditor\",staticClass:\"editor\",attrs:{\"options\":_vm.editorOption},model:{value:(_vm.ruleForm.content),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"content\", $$v)},expression:\"ruleForm.content\"}})],1)],1),_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('el-button',{attrs:{\"type\":\"success\",\"disabled\":_vm.ruleForm.grade==''||_vm.ruleForm.subject==''||_vm.ruleForm.type==null||_vm.ruleForm.videoUrl==''||_vm.ruleForm.videoImage==''||_vm.ruleForm.title==''||_vm.ruleForm.intro==''||_vm.ruleForm.teacherName==''||_vm.ruleForm.teacherImage==''||_vm.ruleForm.content==''},on:{\"click\":function($event){return _vm.submitForm('ruleForm')}}},[_vm._v(\"保存\")]),_c('el-button',{on:{\"click\":function($event){return _vm.resetForm('ruleForm')}}},[_vm._v(\"重置\")]),_c('el-button',{on:{\"click\":function($event){return _vm.goBack('ruleForm')}}},[_vm._v(\"取消\")])],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!./videoEdit.vue.css?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!./videoEdit.vue.css?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}