(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9e30533e"],{2008:function(e,t,r){"use strict";r.r(t);var i=r("e101"),l=r("a2d6");for(var s in l)["default"].indexOf(s)<0&&function(e){r.d(t,e,(function(){return l[e]}))}(s);r("28e4");var a=r("2877"),o=Object(a["a"])(l["default"],i["a"],i["b"],!1,null,null,null);t["default"]=o.exports},"28e4":function(e,t,r){"use strict";var i=r("8e04"),l=r.n(i);l.a},"8e04":function(e,t,r){},a2d6:function(e,t,r){"use strict";r.r(t);var i=r("c660"),l=r.n(i);for(var s in i)["default"].indexOf(s)<0&&function(e){r.d(t,e,(function(){return i[e]}))}(s);t["default"]=l.a},c660:function(e,t){e.exports={data(){return{ruleForm:this.cont.ruleForm,editorOption:this.cont.editor,rules:this.cont.rules,dialogVisible:!1,hideUploadArticle:!1,dialogImageUrl:"",fileLists:[],articleId:""}},created(){return this.ruleForm.type=0,this.load.openFullScreen(),this.articleId=this.$route.query.id,this.articleId&&this.getEdit(this.articleId),!1},methods:{async getEdit(e){const{data:t}=await this.$http.getArticleEdit(e);this.ruleForm=t.data,this.fileLists=[{url:t.data.letterImage}],this.hideUploadArticle=!0},async submitForm(e){if(this.articleId){const{data:e}=await this.$http.patchArticleEdit(this.articleId,this.ruleForm);3202==e.code&&setTimeout(()=>{this.$router.push("/article")},1500)}else{const{data:e}=await this.$http.postArticleEdit(this.ruleForm);3202==e.code&&setTimeout(()=>{this.$router.push("/article")},1500)}this.$refs[e].validate(e=>e?(this.$message.success({message:"保存成功！",center:!0}),!0):(this.$message.warning({message:"内容填写不完整！",center:!0}),!1))},resetForm(e){this.$refs[e].resetFields(),this.fileLists=[],setTimeout(()=>{this.hideUploadArticle=!1},100)},goBack(e){this.resetForm(e),this.$router.push("/article")},async uploadFile(e){this.hideUploadArticle=!0;const{data:t}=await this.$http.uploadFile(e.file);0==t.code?setTimeout(()=>{this.ruleForm.letterImage=t.data.url,this.$message.success({message:"上传成功！",center:!0})},100):this.$message.error({message:"上传失败！",center:!0})},beforeExcelUpload(e){if(e.size>419430.4)return this.$message.error({message:"图片大小不超过400KB!",center:"true"}),!1},handlePictureCardPreview(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleRemove(e,t){setTimeout(()=>{this.hideUploadArticle=!1},100),this.fileLists=t,this.ruleForm.letterImage=""},uploadEorror(){this.$message.error("视频上传失败,请联系客服！"),this.hideUploadVideo=!1}}}},e101:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return l}));var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"MainIncrease"},[r("div",{staticClass:"IncreaseTitle"},[e._v(" "+e._s(e.articleId?"视频新增":"文章新增")+" ")]),r("el-form",{ref:"ruleForm",staticClass:" editForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"60px"}},[r("el-form-item",{attrs:{label:"标题:",prop:"title"}},[r("el-input",{staticStyle:{width:"50%"},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),r("el-form-item",{attrs:{label:"作者:",prop:"author"}},[r("el-input",{staticStyle:{width:"50%"},model:{value:e.ruleForm.author,callback:function(t){e.$set(e.ruleForm,"author",t)},expression:"ruleForm.author"}})],1),r("el-form-item",{attrs:{label:"分类:",prop:"type"}},[r("el-select",{staticStyle:{width:"50%"},attrs:{placeholder:"请选择活动区域"},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},[r("el-option",{attrs:{label:"card文章",value:0}}),r("el-option",{attrs:{label:"banner文章",value:1}})],1)],1),r("el-form-item",{attrs:{label:"封面:",required:"",prop:"letterImage"}},[r("el-upload",{staticClass:"upload-demo",class:{hide:e.hideUploadArticle},attrs:{"before-upload":e.beforeExcelUpload,accept:"image/*","on-error":e.uploadEorror,"http-request":e.uploadFile,"file-list":e.fileLists,action:"#","on-remove":e.handleRemove,"on-preview":e.handlePictureCardPreview,"list-type":"picture-card",limit:1},model:{value:e.ruleForm.letterImage,callback:function(t){e.$set(e.ruleForm,"letterImage",t)},expression:"ruleForm.letterImage"}},[r("i",{staticClass:"el-icon-upload"})]),r("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),r("el-form-item",{attrs:{label:"内容:",prop:"content"}},[r("quill-editor",{ref:"myTextEditor",staticClass:"editor",attrs:{options:e.editorOption},model:{value:e.ruleForm.content,callback:function(t){e.$set(e.ruleForm,"content",t)},expression:"ruleForm.content"}})],1)],1),r("div",{staticStyle:{"text-align":"center"}},[r("el-button",{attrs:{type:"success",disabled:""==e.ruleForm.title||""==e.ruleForm.letterImage||""==e.ruleForm.author||""==e.ruleForm.content},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("保存")]),r("el-button",{staticStyle:{marign:"0 10px"},on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")]),r("el-button",{on:{click:function(t){return e.goBack("ruleForm")}}},[e._v("取消")])],1)],1)])},l=[]}}]);
//# sourceMappingURL=chunk-9e30533e.ccd82107.js.map