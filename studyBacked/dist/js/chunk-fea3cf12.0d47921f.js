(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fea3cf12"],{"0029":function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i.d(e,"b",(function(){return a}));var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"meuBottom"},[i("span",{staticClass:"listTitle"},[t._v(" 用户列表 "),i("el-button",{staticStyle:{float:"right","margin-top":"10px"},attrs:{size:"mini"},on:{click:function(e){return t.showSetRightDialog()}}},[t._v("+新增")])],1),i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.table,border:""}},[i("el-table-column",{attrs:{label:"ID",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.id))])]}}])}),i("el-table-column",{attrs:{label:"角色名",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.name))])]}}])}),i("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(i){return t.showSetRightDialog(e.row.id)}}},[t._v("编辑")]),i("el-button",{staticStyle:{color:"red"},attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(i){return t.handleDelete(e.row.id)}}},[t._v("删除")])]}}])})],1),i("div",{staticStyle:{margin:"10px","text-align":"center"}},[i("el-pagination",{attrs:{background:!0,"current-page":t.pages.page,"page-sizes":[1,2,3,4,5,6,7,8,9,10,20,30,40],"page-size":t.pages.size,layout:" sizes, prev, pager, next, jumper",total:t.pages.totalSize},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),i("el-dialog",{attrs:{title:t.roleId?"编辑角色":"新增角色",visible:t.dialogFormVisible,center:""},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.showSetRightDialogClosed}},[i("div",{staticClass:"roleName"},[i("el-form",{attrs:{model:t.input}},[i("el-form-item",{attrs:{label:"角色名:",required:""}},[i("el-input",{staticStyle:{width:"40%"},attrs:{clearable:""},model:{value:t.input.name,callback:function(e){t.$set(t.input,"name",e)},expression:"input.name"}})],1)],1)],1),i("el-tree",{ref:"treeRef",attrs:{data:t.rightsList,props:t.treeProps,"node-key":"id","show-checkbox":"","default-expand-all":"","default-checked-keys":t.defKeys}}),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),i("el-button",{on:{click:function(e){return t.showSetRightDialogClosed()}}},[t._v("重 置")]),i("el-button",{attrs:{type:"primary",disabled:""==t.input.name},on:{click:function(e){return t.handleEdit()}}},[t._v("确 定")])],1)],1)],1)},a=[]},1666:function(t,e,i){"use strict";i.r(e);var s=i("713e"),a=i.n(s);for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(n);e["default"]=a.a},"312e":function(t,e,i){"use strict";i.r(e);var s=i("0029"),a=i("1666");for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);i("9298");var o=i("2877"),l=Object(o["a"])(a["default"],s["a"],s["b"],!1,null,null,null);e["default"]=l.exports},"713e":function(t,e){t.exports={data(){return{pages:this.cont.pages,table:this.cont.roleTable,input:this.cont.roleData,dialogFormVisible:!1,rightsList:[],defKeys:[],roleId:"",treeProps:{label:"name",children:"children"}}},created(){this.getList(),this.load.openFullScreen()},methods:{async getList(){let t=`page=${this.pages.page}&size=${this.pages.size}`;const{data:e}=await this.$http.getRoleList(t);0==e.code&&(this.table=e.data.list,this.pages.totalSize=e.data.totalSize)},async showSetRightDialog(t){this.roleId=t;const{data:e}=await this.$http.getNavList();if(this.rightsList=e.data,this.roleId){let t=[];const{data:i}=await this.$http.getRoleEdit(this.roleId);for(const s in i.data.permissionList)for(const a in e.data)for(const n in e.data[a].children)i.data.permissionList[s]==e.data[a].children[n].id&&t.push(e.data[a].children[n].id);this.input.name=i.data.name,this.defKeys=t}setTimeout(()=>{this.dialogFormVisible=!0},500)},handleEdit(){const t=[...this.$refs.treeRef.getCheckedKeys(),...this.$refs.treeRef.getHalfCheckedKeys()],e=t.join(",");console.log(e);let i=`id=${this.roleId}&name=${this.input.name}&permissionList=${e}`;this.$confirm("确定要保存吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(()=>{this.roleId?this.$http.putRoleEdit(i):this.$http.postRoleEdit(i),this.getList(),this.$message({type:"success",message:"保存成功",center:!0}),this.dialogFormVisible=!1}).catch(()=>{this.$message({type:"info",message:"已取消保存"})})},async handleDelete(t){this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(()=>{this.$http.deleteRole(t).then(t=>{0==t.data.code&&(this.getList(),this.$message({type:"success",message:"删除成功",center:!0}))})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},showSetRightDialogClosed(){this.defKeys=[],this.$refs.treeRef.setCheckedKeys([]),this.input.name=""},handleSizeChange(t){this.pages.size=t,this.getList()},handleCurrentChange(t){this.pages.page=t,this.getList()}}}},9298:function(t,e,i){"use strict";var s=i("b437"),a=i.n(s);a.a},b437:function(t,e,i){}}]);
//# sourceMappingURL=chunk-fea3cf12.0d47921f.js.map